# BlueHeron.Collections.Trie

## TODO

1. Minimize copying of nodes by using indexes and ref
2. Node.Character to Node.Characters char array to compress branches with one child into a single node (HAT-Trie)

## Nodes as class

## Debug Trace:
|--------|------------|--------------|
| Object |    # Nodes |         Size |
|--------|------------|--------------|
|   List |     374622 |   26494112 B | <!--  25.3 Mb
|--------|------------|--------------|
|   Trie |    1201451 |  619148320 B | <!-- 590.5 Mb -> 23 times larger!
|--------|------------|--------------|

|----------------------|--------|-----------------|-----------------|-----------------|----------------|
|            Operation | # Runs | Minimum (µsec.) | Maximum (µsec.) | Average (µsec.) | Median (µsec.) |
|----------------------|--------|-----------------|-----------------|-----------------|----------------|
|        List Contains |    375 |             0,4 |          2409,4 |           825,4 |         1208,7 |
|        Trie Contains |    375 |             1,3 |            37,9 |             4,8 |           22,2 |
|----------------------|--------|-----------------|-----------------|-----------------|----------------|
|      List StartsWith |     10 |        101739,8 |        115426,4 |        107854,5 |       106189,8 |
|    Trie Find(prefix) |     10 |           107,4 |          5506,0 |          1521,1 |         1752,9 |
|----------------------|--------|-----------------|-----------------|-----------------|----------------|
|           List Regex |      3 |         70886,8 |         85303,2 |         79376,7 |        81940,1 |
|   Trie Find(pattern) |      3 |         81680,2 |         82658,8 |         82228,8 |        81680,2 |
|----------------------|--------|-----------------|-----------------|-----------------|----------------|

## Nodes as struct

### Debug Trace:
|--------|------------|--------------|
| Object |    # Nodes |         Size |
|--------|------------|--------------|
|   List |     374614 |   26348248 B | <!-- removed 6 duplicate words from nl.dic (negligible effect on performance)
|--------|------------|--------------|
|   Trie |    1201446 |  397864528 B | <!-- 35% reduction, but still too large
|--------|------------|--------------|

|----------------------|--------|-----------------|-----------------|-----------------|----------------|
|            Operation | # Runs | Minimum (µsec.) | Maximum (µsec.) | Average (µsec.) | Median (µsec.) |
|----------------------|--------|-----------------|-----------------|-----------------|----------------|
|        List Contains |    375 |             0,9 |          2268,5 |           762,1 |         1134,4 |
|        Trie Contains |    375 |             0,6 |            14,3 |             1,9 |            3,5 | <!-- faster
|----------------------|--------|-----------------|-----------------|-----------------|----------------|
|      List StartsWith |     10 |        105232,8 |        131867,3 |        111754,6 |       114549,8 |
|    Trie Find(prefix) |     10 |           117,2 |          8024,5 |          2018,5 |         5734,8 | <!-- slower!
|----------------------|--------|-----------------|-----------------|-----------------|----------------|
|           List Regex |      3 |         79257,9 |         90390,3 |         86020,1 |        90390,3 |
|   Trie Find(pattern) |      3 |         67661,5 |         70327,0 |         68673,7 |        68032,6 | <!-- faster
|----------------------|--------|-----------------|-----------------|-----------------|----------------|